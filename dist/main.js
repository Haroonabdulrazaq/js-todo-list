(()=>{"use strict";const e=(e,t="",r="",i="",s=!1,a="default")=>({title:e,description:t,dueDate:r,priority:i,completed:s,project:a}),t=e=>({title:e,tasks:[]}),r=(()=>{const e=(t,r)=>0===r?t:e(t.parentNode,r-1);return{addChildren:(e,t)=>{t.forEach((t=>{e.appendChild(t)}))},textEl:(e,t)=>{const r=document.createElement(e);return r.innerHTML=t,r},classyDiv:e=>{const t=document.createElement("div");return t.setAttribute("class",e),t},createTag:(e,t="")=>{const r=document.createElement(e);return""!==t&&r.setAttribute("class",t),r},storageAvailable:e=>{let t;try{t=window[e];const r="__storage_test__";return t.setItem(r,r),t.removeItem(r),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&t&&0!==t.length}},nthParent:e}})(),i=e=>{document.querySelector(".project-list").innerHTML="",e.forEach((t=>{((e,t)=>{const i=document.querySelector(".project-list"),s=r.classyDiv("project card"),a=e.indexOf(t);s.setAttribute("p-index",a);const n=r.textEl("h3",t.title),c=r.createTag("i","del-project fa fa-trash"),o=r.createTag("i","edit-project fa fa-edit"),d=r.createTag("input","edit-input input");d.classList.add("hide"),d.setAttribute("placeholder","Enter new title here");const l=r.createTag("ul","task-list"),u=document.createElement("div"),p=document.createElement("form"),m=r.createTag("input","input");m.setAttribute("placeholder","Enter a new task here"),m.setAttribute("type","text");const g=r.createTag("input","task-submit button mt-4 is-info");g.setAttribute("type","submit"),g.setAttribute("value","Add Task"),r.addChildren(p,[m,g]),r.addChildren(u,[l,p]),r.addChildren(s,[n,d,o,c,u]),i.appendChild(s),t.tasks.forEach((e=>{const i=r.createTag("li","task-item"),s=r.classyDiv("task-div"),a=r.createTag("input","task-checkbox");a.setAttribute("type","checkbox");const n=t.tasks.indexOf(e);s.setAttribute("t-index",n);const c=r.textEl("p",e.title),o=r.createTag("i","fa fa-edit"),d=r.createTag("i","fa fa-trash");r.addChildren(s,[a,c,o,d]),i.appendChild(s),l.appendChild(i)}))})(e,t)})),r.storageAvailable("localStorage")&&localStorage.setItem("projects_store",JSON.stringify(e))},s=localStorage.getItem("projects_store")?JSON.parse(localStorage.getItem("projects_store")):[];(s=>{const a=document.querySelector(".add-project"),n=document.querySelector(".new-project-form"),c=document.querySelector(".close-project-edit");let o=!1;const d=document.querySelector(".confirm-delete");a.addEventListener("click",(()=>{n.classList.toggle("hide")})),c.addEventListener("click",(()=>{n.classList.toggle("hide")})),document.querySelector(".create-project-btn").addEventListener("click",(()=>{const e=document.querySelector(".new-project-name").value;if(e.length>0){const r=t(e);s.push(r),i(s)}}));const l=document.querySelector(".edit-task"),u=document.querySelector(".task-textarea");document.querySelector("main").addEventListener("click",(t=>{const a=(e,t)=>e.target&&e.target.matches(t),n=(e,t)=>{const r=l.getAttribute("pt-indices").split(",").map(Number),[i,a]=[...r];s[i].tasks[a][e]=t};if(a(t,".description-submit")&&u.value.length>0){n("description",u);const e=document.querySelector(".description-submit");document.querySelector(".task-description p").innerHTML=u.value,u.classList.add("hide"),e.classList.add("hide"),i(s)}if(a(t,".task-checkbox")){const e=t.target.parentNode.getAttribute("t-index"),i=r.nthParent(t.target,5).getAttribute("p-index"),a=s[i].tasks[e];a.completed=t.target.checked;const n=t.target.parentNode.querySelector("p");a.completed?n.classList.add("linethrough"):n.classList.remove("linethrough")}if(a(t,"i.del-project")&&(o=t.target.parentNode.getAttribute("p-index"),d.classList.remove("hide")),a(t,".delete-project-no")&&(o=!1,d.classList.add("hide")),a(t,".delete-project-yes")&&(s.splice(o,1),o=!1,d.classList.add("hide"),i(s)),a(t,"i.edit-project")){const e=t.target.parentNode.querySelector(".edit-input"),r=t.target.parentNode.getAttribute("p-index");e.classList.toggle("hide"),e.classList.contains("hide")||document.querySelector(".project-list").addEventListener("keyup",(t=>{t.preventDefault(),"Enter"===t.key&&e.value.length>0&&(s[r].title=e.value,i(s))}))}if(a(t,"input.task-submit")){t.preventDefault();const a=t.target.parentNode.firstChild.value,n=r.nthParent(t.target,3).getAttribute("p-index"),c=s[n];if(""!==a.length){const t=e(a);c.tasks.push(t),i(s)}}if(a(t,".task-item .fa-trash")){const e=t.target.parentNode.getAttribute("t-index"),i=r.nthParent(t.target,2),a=r.nthParent(t.target,5).getAttribute("p-index");s[a].tasks.splice(e,1),i.remove()}if(a(t,".task-div p")||a(t,".task-div .fa-edit")){const e=t.target.parentNode.getAttribute("t-index"),a=r.nthParent(t.target,5).getAttribute("p-index"),n=s[a].tasks[e],c=document.querySelector(".task-title h3"),o=document.querySelector(".task-description p"),d=document.querySelector(".task-description textarea");l.classList.toggle("hide"),l.setAttribute("pt-indices",`${a}, ${e}`),n.description.length>0?(d.classList.add("hide"),d.value="",o.innerHTML=n.description):(d.classList.remove("hide"),d.value="",o.innerHTML=""),n.priority?document.querySelector("input#"+n.priority).click():["High","Medium","Low"].forEach((e=>{document.querySelector("input#"+e).checked=!1})),c.innerHTML="Task: "+n.title,l.classList.contains("hide")?l.removeAttribute("pt-indices"):document.querySelector(".date-input").value=n.dueDate,i(s)}const c=document.querySelector(".task-title input");a(t,".task-title .title")&&c.classList.remove("hide"),c.classList.contains("hide")||(c.value="",document.querySelector("main").addEventListener("keyup",(e=>{e.preventDefault();const t=c.value;"Enter"===e.key&&c.value.length>0&&(n("title",t),c.classList.add("hide"),document.querySelector(".task-title .title").innerHTML="Task: "+t,i(s))}))),a(t,".task-textarea")&&document.querySelector("main").addEventListener("keyup",(e=>{e.preventDefault(),"Enter"===e.key&&u.value.length>0&&(n("description",u.value),document.querySelector(".task-description p").innerHTML=u.value,i(s))})),a(t,".task-description p")&&(u.classList.toggle("hide"),document.querySelector(".description-submit").classList.toggle("hide"),u.value=""),a(t,'.task-priority input[name="taskPriority"]')&&n("priority",t.target.value),a(t,".close-edit i")&&l.classList.toggle("hide")})),document.querySelector(".date-input").addEventListener("change",(e=>{const t=l.getAttribute("pt-indices").split(",").map(Number),[r,i]=[...t];s[r].tasks[i].dueDate=e.target.value}))})(s);const a=t("Project 1");s.push(a);const n=e("task 1");n.priority="Medium",a.tasks.push(n);const c=e("task 2");a.tasks.push(c),i(s)})();
(()=>{"use strict";const t=(t,e="",r="",i="",a=!1,s="default")=>({title:t,description:e,dueDate:r,priority:i,completed:a,project:"default"}),e=t=>({title:t,tasks:[]}),r=(()=>{const t=(e,r)=>0===r?e:t(e.parentNode,r-1);return{addChildren:(t,e)=>{e.forEach((e=>{t.appendChild(e)}))},textEl:(t,e)=>{const r=document.createElement(t);return r.innerHTML=e,r},classyDiv:t=>{const e=document.createElement("div");return e.setAttribute("class",t),e},createTag:(t,e="")=>{const r=document.createElement(t);return""!=e&&r.setAttribute("class",e),r},storageAvailable:t=>{var e;try{e=window[t];var r="__storage_test__";return e.setItem(r,r),e.removeItem(r),!0}catch(t){return t instanceof DOMException&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&e&&0!==e.length}},nthParent:t}})(),i=t=>{document.querySelector(".project-list").innerHTML="",t.forEach((e=>{((t,e)=>{const i=document.querySelector(".project-list"),a=r.classyDiv("project card"),s=t.indexOf(e);a.setAttribute("p-index",s);const n=r.textEl("h3",e.title),c=r.createTag("i","del-project fa fa-trash"),o=r.createTag("i","edit-project fa fa-edit"),d=r.createTag("input","edit-input input");d.classList.add("hide"),d.setAttribute("placeholder","Enter new title here");const l=r.createTag("ul","task-list"),u=document.createElement("div"),p=document.createElement("form");let g=r.createTag("input","input");g.setAttribute("placeholder","Enter a new task here"),g.setAttribute("type","text");let h=r.createTag("input","task-submit button mt-4 is-info");h.setAttribute("type","submit"),h.setAttribute("value","Add Task"),r.addChildren(p,[g,h]),r.addChildren(u,[l,p]),r.addChildren(a,[n,d,o,c,u]),i.appendChild(a),e.tasks.forEach((t=>{const i=r.createTag("li","task-item"),a=r.classyDiv("task-div"),s=r.createTag("input","task-checkbox");s.setAttribute("type","checkbox");const n=e.tasks.indexOf(t);a.setAttribute("t-index",n);const c=r.textEl("p",t.title),o=r.createTag("i","fa fa-edit"),d=r.createTag("i","fa fa-trash");r.addChildren(a,[s,c,o,d]),i.appendChild(a),l.appendChild(i)}))})(t,e)})),r.storageAvailable("localStorage")&&localStorage.setItem("projects_store",JSON.stringify(t))},a=localStorage.getItem("projects_store")?JSON.parse(localStorage.getItem("projects_store")):[];(a=>{const s=document.querySelector(".add-project"),n=document.querySelector(".new-project-form"),c=document.querySelector(".close-project-edit");s.addEventListener("click",(()=>{n.classList.toggle("hide")})),c.addEventListener("click",(()=>{n.classList.toggle("hide")})),document.querySelector(".create-project-btn").addEventListener("click",(t=>{const r=document.querySelector(".new-project-name").value;if(r.length>0){let t=e(r);a.push(t),i(a)}}));const o=document.querySelector(".edit-task"),d=document.querySelector(".task-textarea");document.querySelector("main").addEventListener("click",(function(e){const s=(t,e)=>t.target&&t.target.matches(e),n=(t,e)=>{const r=o.getAttribute("pt-indices").split(",").map(Number);let[i,s]=[...r];a[i].tasks[s][t]=e};if(s(e,".description-submit")&&d.value.length>0){n("description",d);let t=document.querySelector(".description-submit");document.querySelector(".task-description p").innerHTML=d.value,d.classList.add("hide"),t.classList.add("hide"),i(a)}if(s(e,".task-checkbox")){const t=e.target.parentNode.getAttribute("t-index"),i=r.nthParent(e.target,5).getAttribute("p-index"),s=a[i].tasks[t];s.completed=e.target.checked;let n=e.target.parentNode.querySelector("p");s.completed?n.classList.add("linethrough"):n.classList.remove("linethrough")}if(s(e,"i.del-project")){const t=e.target.parentNode.getAttribute("p-index");a.splice(t,1),i(a)}if(s(e,"i.edit-project")){const t=e.target.parentNode.querySelector(".edit-input"),r=e.target.parentNode.getAttribute("p-index");t.classList.toggle("hide"),t.classList.contains("hide")||document.querySelector(".project-list").addEventListener("keyup",(function(e){e.preventDefault(),"Enter"===e.key&&t.value.length>0&&(a[r].title=t.value,i(a))}))}if(s(e,"input.task-submit")){e.preventDefault(),r.nthParent(e.target,2).firstChild;const s=e.target.parentNode.firstChild.value,n=(r.nthParent(e.target,2).firstChild,r.nthParent(e.target,3).getAttribute("p-index")),c=a[n];if(""!=s.length){const e=t(s);c.tasks.push(e),i(a)}}if(s(e,".task-item .fa-trash")){const t=e.target.parentNode.getAttribute("t-index"),i=(r.nthParent(e.target,2).firstChild,r.nthParent(e.target,2)),s=r.nthParent(e.target,5).getAttribute("p-index");a[s].tasks.splice(t,1),i.remove()}if(s(e,".task-div p")||s(e,".task-div .fa-edit")){const t=e.target.parentNode.getAttribute("t-index"),s=r.nthParent(e.target,5).getAttribute("p-index"),n=a[s].tasks[t],c=document.querySelector(".task-title h3"),d=document.querySelector(".task-description p"),l=document.querySelector(".task-description textarea");o.classList.toggle("hide"),o.setAttribute("pt-indices",`${s}, ${t}`),n.description.length>0?(document.querySelector(".description-submit"),l.classList.add("hide"),l.value="",d.innerHTML=n.description):(l.classList.remove("hide"),l.value="",d.innerHTML=""),n.priority?document.querySelector("input#"+n.priority).click():["High","Medium","Low"].forEach((t=>{document.querySelector("input#"+t).checked=!1})),c.innerHTML="Task: "+n.title,o.classList.contains("hide")?o.removeAttribute("pt-indices"):document.querySelector(".date-input").value=n.dueDate,i(a)}let c=document.querySelector(".task-title input");if(s(e,".task-title .title")&&c.classList.remove("hide"),c.classList.contains("hide")||(c.value="",document.querySelector("main").addEventListener("keyup",(function(t){t.preventDefault();let e=c.value;"Enter"===t.key&&c.value.length>0&&(n("title",e),c.classList.add("hide"),document.querySelector(".task-title .title").innerHTML="Task: "+e,i(a))}))),s(e,".task-textarea")&&document.querySelector("main").addEventListener("keyup",(function(t){t.preventDefault(),"Enter"===t.key&&d.value.length>0&&(n("description",d.value),document.querySelector(".task-description p").innerHTML=d.value,i(a))})),s(e,".task-description p")&&(d.classList.toggle("hide"),document.querySelector(".description-submit").classList.toggle("hide"),d.value=""),s(e,'.task-priority input[name="taskPriority"]'))switch(n("priority",e.target.value),console.log(taskPara),e.target.value){case"High":taskPara.style.color="green";break;case"Medium":taskPara.style.color="blue";break;case"Low":taskPara.style.color="red";break;default:taskDiv.style.color="inherit"}s(e,".close-edit i")&&o.classList.toggle("hide")})),document.querySelector(".date-input").addEventListener("change",(t=>{const e=o.getAttribute("pt-indices").split(",").map(Number);let[r,i]=[...e];a[r].tasks[i].dueDate=t.target.value}))})(a);const s=e("Project 1");a.push(s);const n=t("task 1");n.priority="Medium",s.tasks.push(n);const c=t("task 2");s.tasks.push(c),i(a)})();
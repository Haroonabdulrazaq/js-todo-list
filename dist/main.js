(()=>{"use strict";const e=e=>({title:e,tasks:[]}),t=(()=>{const e=(t,r)=>0===r?t:e(t.parentNode,r-1);return{addChildren:(e,t)=>{t.forEach((t=>{e.appendChild(t)}))},textEl:(e,t)=>{const r=document.createElement(e);return r.innerHTML=t,r},classyDiv:e=>{const t=document.createElement("div");return t.setAttribute("class",e),t},createTag:(e,t="")=>{const r=document.createElement(e);return""!==t&&r.setAttribute("class",t),r},storageAvailable:e=>{let t;try{t=window[e];const r="__storage_test__";return t.setItem(r,r),t.removeItem(r),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&t&&0!==t.length}},nthParent:e}})(),r=e=>{document.querySelector(".project-list").innerHTML="",e.forEach((r=>{((e,r)=>{const i=document.querySelector(".project-list"),a=t.classyDiv("project card"),s=e.indexOf(r);a.setAttribute("p-index",s);const n=t.textEl("h3",r.title),c=t.createTag("i","del-project fa fa-trash"),o=t.createTag("i","edit-project fa fa-edit"),d=t.createTag("input","edit-input input");d.classList.add("hide"),d.setAttribute("placeholder","Enter new title here");const l=t.createTag("ul","task-list"),u=document.createElement("div"),p=document.createElement("form"),g=t.createTag("input","input");g.setAttribute("placeholder","Enter a new task here"),g.setAttribute("type","text");const m=t.createTag("input","task-submit button mt-4 is-info");m.setAttribute("type","submit"),m.setAttribute("value","Add Task"),t.addChildren(p,[g,m]),t.addChildren(u,[l,p]),t.addChildren(a,[n,d,o,c,u]),i.appendChild(a),r.tasks.forEach((e=>{const i=t.createTag("li","task-item"),a=t.classyDiv("task-div"),s=t.createTag("input","task-checkbox");s.setAttribute("type","checkbox");const n=r.tasks.indexOf(e);a.setAttribute("t-index",n);const c=t.textEl("p",e.title),o=t.createTag("i","fa fa-edit"),d=t.createTag("i","fa fa-trash");t.addChildren(a,[s,c,o,d]),i.appendChild(a),l.appendChild(i)}))})(e,r)})),t.storageAvailable("localStorage")&&localStorage.setItem("projects_store",JSON.stringify(e))},i=localStorage.getItem("projects_store")?JSON.parse(localStorage.getItem("projects_store")):[];(i=>{const a=document.querySelector(".add-project"),s=document.querySelector(".new-project-form"),n=document.querySelector(".close-project-edit");let c=!1;const o=document.querySelector(".confirm-delete");a.addEventListener("click",(()=>{s.classList.toggle("hide")})),n.addEventListener("click",(()=>{s.classList.toggle("hide")})),document.querySelector(".create-project-btn").addEventListener("click",(()=>{const t=document.querySelector(".new-project-name").value;if(t.length>0){const a=e(t);i.push(a),r(i)}}));const d=document.querySelector(".edit-task"),l=document.querySelector(".task-textarea");document.querySelector("main").addEventListener("click",(e=>{const a=(e,t)=>e.target&&e.target.matches(t),s=(e,t)=>{const r=d.getAttribute("pt-indices").split(",").map(Number),[a,s]=[...r];i[a].tasks[s][e]=t};if(a(e,".description-submit")&&l.value.length>0){s("description",l);const e=document.querySelector(".description-submit");document.querySelector(".task-description p").innerHTML=l.value,l.classList.add("hide"),e.classList.add("hide"),r(i)}if(a(e,".task-checkbox")){const r=e.target.parentNode.getAttribute("t-index"),a=t.nthParent(e.target,5).getAttribute("p-index"),s=i[a].tasks[r];s.completed=e.target.checked;const n=e.target.parentNode.querySelector("p");s.completed?n.classList.add("linethrough"):n.classList.remove("linethrough")}if(a(e,"i.del-project")&&(c=e.target.parentNode.getAttribute("p-index"),o.classList.remove("hide")),a(e,".delete-project-no")&&(c=!1,o.classList.add("hide")),a(e,".delete-project-yes")&&(i.splice(c,1),c=!1,o.classList.add("hide"),r(i)),a(e,"i.edit-project")){const t=e.target.parentNode.querySelector(".edit-input"),a=e.target.parentNode.getAttribute("p-index");t.classList.toggle("hide"),t.classList.contains("hide")||document.querySelector(".project-list").addEventListener("keyup",(e=>{e.preventDefault(),"Enter"===e.key&&t.value.length>0&&(i[a].title=t.value,r(i))}))}if(a(e,"input.task-submit")){e.preventDefault();const a=e.target.parentNode.firstChild.value,s=t.nthParent(e.target,3).getAttribute("p-index"),n=i[s];if(""!==a.length){const e=((e,t="",r="",i="",a=!1,s="default")=>({title:e,description:t,dueDate:r,priority:i,completed:a,project:s}))(a);n.tasks.push(e),r(i)}}if(a(e,".task-item .fa-trash")){const r=e.target.parentNode.getAttribute("t-index"),a=t.nthParent(e.target,2),s=t.nthParent(e.target,5).getAttribute("p-index");i[s].tasks.splice(r,1),a.remove()}if(a(e,".task-div p")||a(e,".task-div .fa-edit")){const a=e.target.parentNode.getAttribute("t-index"),s=t.nthParent(e.target,5).getAttribute("p-index"),n=i[s].tasks[a],c=document.querySelector(".task-title h3"),o=document.querySelector(".task-description p"),l=document.querySelector(".task-description textarea");d.classList.toggle("hide"),d.setAttribute("pt-indices",`${s}, ${a}`),n.description.length>0?(l.classList.add("hide"),l.value="",o.innerHTML=n.description):(l.classList.remove("hide"),l.value="",o.innerHTML=""),n.priority?document.querySelector("input#"+n.priority).click():["High","Medium","Low"].forEach((e=>{document.querySelector("input#"+e).checked=!1})),c.innerHTML="Task: "+n.title,d.classList.contains("hide")?d.removeAttribute("pt-indices"):document.querySelector(".date-input").value=n.dueDate,r(i)}const n=document.querySelector(".task-title input");a(e,".task-title .title")&&n.classList.remove("hide"),n.classList.contains("hide")||(n.value="",document.querySelector("main").addEventListener("keyup",(e=>{e.preventDefault();const t=n.value;"Enter"===e.key&&n.value.length>0&&(s("title",t),n.classList.add("hide"),document.querySelector(".task-title .title").innerHTML="Task: "+t,r(i))}))),a(e,".task-textarea")&&document.querySelector("main").addEventListener("keyup",(e=>{e.preventDefault(),"Enter"===e.key&&l.value.length>0&&(s("description",l.value),document.querySelector(".task-description p").innerHTML=l.value,r(i))})),a(e,".task-description p")&&(l.classList.toggle("hide"),document.querySelector(".description-submit").classList.toggle("hide"),l.value=""),a(e,'.task-priority input[name="taskPriority"]')&&s("priority",e.target.value),a(e,".close-edit i")&&d.classList.toggle("hide")})),document.querySelector(".date-input").addEventListener("change",(e=>{const t=d.getAttribute("pt-indices").split(",").map(Number),[r,a]=[...t];i[r].tasks[a].dueDate=e.target.value}))})(i);const a=e("Default Project");0===i.length&&i.push(a),r(i)})();
(()=>{"use strict";const t=(()=>{const t=(e,r)=>0===r?e:t(e.parentNode,r-1);return{addChildren:(t,e)=>{e.forEach((e=>{t.appendChild(e)}))},textEl:(t,e)=>{const r=document.createElement(t);return r.innerHTML=e,r},classyDiv:t=>{const e=document.createElement("div");return e.setAttribute("class",t),e},createTag:(t,e="")=>{const r=document.createElement(t);return""!=e&&r.setAttribute("class",e),r},storageAvailable:t=>{var e;try{e=window[t];var r="__storage_test__";return e.setItem(r,r),e.removeItem(r),!0}catch(t){return t instanceof DOMException&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&e&&0!==e.length}},nthParent:t}})(),e=(t,e="",r="",i="",a=!1,n="default")=>({title:t,description:e,dueDate:r,priority:i,completed:a,project:"default"}),r=t=>({title:t,tasks:[]}),i=localStorage.getItem("projects_store")?JSON.parse(localStorage.getItem("projects_store")):[],a=document.querySelector(".project-list"),n=e=>{const r=t.classyDiv("project card"),n=i.indexOf(e);r.setAttribute("p-index",n);const s=t.textEl("h3",e.title),c=t.createTag("i","del-project fa fa-trash"),o=t.createTag("i","edit-project fa fa-edit"),d=t.createTag("input","edit-input input");d.classList.add("hide"),d.setAttribute("placeholder","Enter new title here");const l=t.createTag("ul","task-list"),u=document.createElement("div"),p=document.createElement("form");let g=t.createTag("input","input");g.setAttribute("placeholder","Enter a new task here"),g.setAttribute("type","text");let m=t.createTag("input","task-submit button mt-4 is-info");m.setAttribute("type","submit"),m.setAttribute("value","Add Task"),t.addChildren(p,[g,m]),t.addChildren(u,[l,p]),t.addChildren(r,[s,d,o,c,u]),a.appendChild(r),e.tasks.forEach((r=>{const i=t.createTag("li","task-item"),a=t.classyDiv("task-div"),n=t.createTag("input","task-checkbox");n.setAttribute("type","checkbox");const s=e.tasks.indexOf(r);a.setAttribute("t-index",s);const c=t.textEl("p",r.title),o=t.createTag("i","fa fa-edit"),d=t.createTag("i","fa fa-trash");t.addChildren(a,[n,c,o,d]),i.appendChild(a),l.appendChild(i)}))},s=()=>{document.querySelector(".project-list").innerHTML="",i.forEach(n),t.storageAvailable("localStorage")&&localStorage.setItem("projects_store",JSON.stringify(i))},c=document.querySelector(".add-project"),o=document.querySelector(".new-project-form"),d=document.querySelector(".close-project-edit");c.addEventListener("click",(()=>{o.classList.toggle("hide")})),d.addEventListener("click",(()=>{o.classList.toggle("hide")})),document.querySelector(".create-project-btn").addEventListener("click",(t=>{const e=document.querySelector(".new-project-name").value;if(e.length>0){let t=r(e);i.push(t),s()}}));const l=document.querySelector(".edit-task"),u=document.querySelector(".task-textarea");document.querySelector("main").addEventListener("click",(function(r){const a=(t,e)=>t.target&&t.target.matches(e),n=(t,e)=>{const r=l.getAttribute("pt-indices").split(",").map(Number);let[a,n]=[...r];i[a].tasks[n][t]=e};if(a(r,".description-submit")&&u.value.length>0){n("description",u);let t=document.querySelector(".description-submit");document.querySelector(".task-description p").innerHTML=u.value,u.classList.add("hide"),t.classList.add("hide"),s()}if(a(r,".task-checkbox")){const e=r.target.parentNode.getAttribute("t-index"),a=t.nthParent(r.target,5).getAttribute("p-index");i[a].tasks[e].completed=r.target.checked}if(a(r,"i.del-project")){const t=r.target.parentNode.getAttribute("p-index");i.splice(t,1),s()}if(a(r,"i.edit-project")){const t=r.target.parentNode.querySelector(".edit-input"),e=r.target.parentNode.getAttribute("p-index");t.classList.toggle("hide"),t.classList.contains("hide")||document.querySelector(".project-list").addEventListener("keyup",(function(r){r.preventDefault(),"Enter"===r.key&&t.value.length>0&&(i[e].title=t.value,s())}))}if(a(r,"input.task-submit")){r.preventDefault(),t.nthParent(r.target,2).firstChild;const a=r.target.parentNode.firstChild.value,n=(t.nthParent(r.target,2).firstChild,t.nthParent(r.target,3).getAttribute("p-index")),c=i[n];if(""!=a.length){const t=e(a);c.tasks.push(t),s()}}if(a(r,".task-item .fa-trash")){const e=r.target.parentNode.getAttribute("t-index"),a=(t.nthParent(r.target,2).firstChild,t.nthParent(r.target,2)),n=t.nthParent(r.target,5).getAttribute("p-index");i[n].tasks.splice(e,1),a.remove()}if(a(r,".task-div p")||a(r,".task-div .fa-edit")){const e=r.target.parentNode.getAttribute("t-index"),a=t.nthParent(r.target,5).getAttribute("p-index"),n=i[a].tasks[e],c=document.querySelector(".task-title h3"),o=document.querySelector(".task-description p"),d=document.querySelector(".task-description textarea");l.classList.toggle("hide"),l.setAttribute("pt-indices",`${a}, ${e}`),n.description.length>0?(document.querySelector(".description-submit"),d.classList.add("hide"),d.value="",o.innerHTML=n.description):(d.classList.remove("hide"),d.value="",o.innerHTML=""),n.priority?document.querySelector("input#"+n.priority).click():["High","Medium","Low"].forEach((t=>{document.querySelector("input#"+t).checked=!1})),c.innerHTML="Task: "+n.title,l.classList.contains("hide")?l.removeAttribute("pt-indices"):document.querySelector(".date-input").value=n.dueDate,s()}let c=document.querySelector(".task-title input");a(r,".task-title .title")&&c.classList.remove("hide"),c.classList.contains("hide")||document.querySelector("main").addEventListener("keyup",(function(t){t.preventDefault(),newTaskTitle=c.value,"Enter"===t.key&&c.value.length>0&&(n("title",newTaskTitle),c.classList.add("hide"),document.querySelector(".task-title .title").innerHTML="Task: "+newTaskTitle,s())})),a(r,".task-textarea")&&document.querySelector("main").addEventListener("keyup",(function(t){t.preventDefault(),"Enter"===t.key&&u.value.length>0&&(n("description",u.value),document.querySelector(".task-description p").innerHTML=u.value,s())})),a(r,".task-description p")&&(u.classList.toggle("hide"),document.querySelector(".description-submit").classList.toggle("hide"),u.value=""),a(r,'.task-priority input[name="taskPriority"]')&&n("priority",r.target.value),a(r,".close-edit i")&&l.classList.toggle("hide")})),document.querySelector(".date-input").addEventListener("change",(t=>{const e=l.getAttribute("pt-indices").split(",").map(Number);let[r,a]=[...e];i[r].tasks[a].dueDate=t.target.value}));const p=r("Project 1");i.push(p);const g=e("task 1");g.priority="Medium",p.tasks.push(g);const m=e("task 2");p.tasks.push(m),s()})();
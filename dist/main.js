(()=>{"use strict";const t=(t,e)=>{e.forEach((e=>{t.appendChild(e)}))},e=(t,e)=>{const i=document.createElement(t);return i.innerHTML=e,i},i=t=>{const e=document.createElement("div");return e.setAttribute("class",t),e},r=(t,e="")=>{const i=document.createElement(t);return""!=e&&i.setAttribute("class",e),i},s=t=>{var e;try{e=window[t];var i="__storage_test__";return e.setItem(i,i),e.removeItem(i),!0}catch(t){return t instanceof DOMException&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&e&&0!==e.length}},n=(t,e="",i="",r="",s=!1,n="default")=>({title:t,description:e,dueDate:i,priority:r,completed:s,project:"default"}),a=t=>({title:t,tasks:[]}),c=localStorage.getItem("projects_store")?JSON.parse(localStorage.getItem("projects_store")):[],o=document.querySelector(".project-list"),d=s=>{const n=i("project card"),a=c.indexOf(s);n.setAttribute("p-index",a);const d=e("h3",s.title),u=r("i","del-project fa fa-trash"),l=r("i","edit-project fa fa-edit"),p=r("input","edit-input input");p.classList.add("hide"),p.setAttribute("placeholder","Enter new title here");const m=r("ul","task-list"),g=document.createElement("div"),h=document.createElement("form");let k=r("input","input");k.setAttribute("placeholder","Enter a new task here"),k.setAttribute("type","text");let y=r("input","task-submit button mt-4 is-info");y.setAttribute("type","submit"),y.setAttribute("value","Add Task"),t(h,[k,y]),t(g,[m,h]),t(n,[d,p,l,u,g]),o.appendChild(n),s.tasks.forEach((n=>{const a=r("li","task-item"),c=i("task-div"),o=r("input","task-checkbox");o.setAttribute("type","checkbox");const d=s.tasks.indexOf(n);c.setAttribute("t-index",d);const u=e("p",n.title),l=r("i","fa fa-edit"),p=r("i","fa fa-trash");t(c,[o,u,l,p]),a.appendChild(c),m.appendChild(a)}))},u=()=>{document.querySelector(".project-list").innerHTML="",c.forEach(d),s("localStorage")&&localStorage.setItem("projects_store",JSON.stringify(c))},l=(t,e)=>0===e?t:l(t.parentNode,e-1),p=document.querySelector(".add-project"),m=document.querySelector(".new-project-form"),g=document.querySelector(".close-project-edit");p.addEventListener("click",(()=>{m.classList.toggle("hide")})),g.addEventListener("click",(()=>{m.classList.toggle("hide")})),document.querySelector(".create-project-btn").addEventListener("click",(t=>{const e=document.querySelector(".new-project-name").value;if(e.length>0){let t=a(e);c.push(t),u()}}));const h=document.querySelector(".edit-task"),k=document.querySelector(".task-textarea");document.querySelector("main").addEventListener("click",(function(t){const e=(t,e)=>t.target&&t.target.matches(e),i=(t,e)=>{const i=h.getAttribute("pt-indices").split(",").map(Number);let[r,s]=[...i];c[r].tasks[s][t]=e};if(e(t,".description-submit")&&k.value.length>0){i("description",k);let t=document.querySelector(".description-submit");document.querySelector(".task-description p").innerHTML=k.value,k.classList.add("hide"),t.classList.add("hide"),u()}if(e(t,".task-checkbox")){const e=t.target.parentNode.getAttribute("t-index"),i=l(t.target,5).getAttribute("p-index");c[i].tasks[e].completed=t.target.checked}if(e(t,"i.del-project")){const e=t.target.parentNode.getAttribute("p-index");c.splice(e,1),u()}if(e(t,"i.edit-project")){const e=t.target.parentNode.querySelector(".edit-input"),i=t.target.parentNode.getAttribute("p-index");e.classList.toggle("hide"),e.classList.contains("hide")||document.querySelector(".project-list").addEventListener("keyup",(function(t){t.preventDefault(),"Enter"===t.key&&e.value.length>0&&(c[i].title=e.value,u())}))}if(e(t,"input.task-submit")){t.preventDefault(),l(t.target,2).firstChild;const e=t.target.parentNode.firstChild.value,i=(l(t.target,2).firstChild,l(t.target,3).getAttribute("p-index")),r=c[i];if(""!=e.length){const t=n(e);r.tasks.push(t),u()}}if(e(t,".task-item .fa-trash")){const e=t.target.parentNode.getAttribute("t-index"),i=(l(t.target,2).firstChild,l(t.target,2)),r=l(t.target,5).getAttribute("p-index");c[r].tasks.splice(e,1),i.remove()}if(e(t,".task-div p")||e(t,".task-div .fa-edit")){const e=t.target.parentNode.getAttribute("t-index"),i=l(t.target,5).getAttribute("p-index"),r=c[i].tasks[e],s=document.querySelector(".task-title h3"),n=document.querySelector(".task-description p"),a=document.querySelector(".task-description textarea");h.classList.toggle("hide"),h.setAttribute("pt-indices",`${i}, ${e}`),r.description.length>0?(document.querySelector(".description-submit"),a.classList.add("hide"),a.value="",n.innerHTML=r.description):(a.classList.remove("hide"),a.value="",n.innerHTML=""),r.priority?document.querySelector("input#"+r.priority).click():["High","Medium","Low"].forEach((t=>{document.querySelector("input#"+t).checked=!1})),s.innerHTML="Task: "+r.title,h.classList.contains("hide")?h.removeAttribute("pt-indices"):document.querySelector(".date-input").value=r.dueDate,u()}let r=document.querySelector(".task-title input");e(t,".task-title .title")&&r.classList.remove("hide"),r.classList.contains("hide")||document.querySelector("main").addEventListener("keyup",(function(t){t.preventDefault(),newTaskTitle=r.value,"Enter"===t.key&&r.value.length>0&&(i("title",newTaskTitle),r.classList.add("hide"),document.querySelector(".task-title .title").innerHTML="Task: "+newTaskTitle,u())})),e(t,".task-textarea")&&document.querySelector("main").addEventListener("keyup",(function(t){t.preventDefault(),"Enter"===t.key&&k.value.length>0&&(i("description",k.value),document.querySelector(".task-description p").innerHTML=k.value,u())})),e(t,".task-description p")&&(k.classList.toggle("hide"),document.querySelector(".description-submit").classList.toggle("hide"),k.value=""),e(t,'.task-priority input[name="taskPriority"]')&&i("priority",t.target.value),e(t,".close-edit i")&&h.classList.toggle("hide")})),document.querySelector(".date-input").addEventListener("change",(t=>{const e=h.getAttribute("pt-indices").split(",").map(Number);let[i,r]=[...e];c[i].tasks[r].dueDate=t.target.value}));const y=a("Project 1");c.push(y);const f=n("task 1");f.priority="Medium",y.tasks.push(f);const v=n("task 2");y.tasks.push(v),u()})();
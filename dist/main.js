(()=>{const t=(t,e)=>{e.forEach((e=>{t.appendChild(e)}))},e=(t,e)=>{const n=document.createElement(t);return n.innerHTML=e,n},n=t=>{const e=document.createElement("div");return e.setAttribute("class",t),e},r=(t,e="")=>{const n=document.createElement(t);return""!=e&&n.setAttribute("class",e),n},a=(t,e="",n="",r="",a=!1,o="default")=>({title:t,description:e,dueDate:n,priority:r,completed:a,project:"default"}),o=t=>({title:t,tasks:[]}),i=[],s=document.querySelector(".project-list"),d=a=>{const o=n("project"),d=i.indexOf(a);o.setAttribute("p-index",d);const c=e("h3",a.title),l=r("button","del-project");l.innerHTML="Delete Project";const u=r("button","edit-project");u.innerHTML="Edit";const p=r("input","edit-input");p.classList.add("hide");const g=r("ul","task-list"),m=document.createElement("div"),h=document.createElement("form");let N=document.createElement("input");N.setAttribute("type","text");let k=r("input","task-submit");k.setAttribute("type","submit"),k.setAttribute("value","Add Task"),t(h,[N,k]),t(m,[g,h]),t(o,[c,p,l,u,m]),s.appendChild(o),a.tasks.forEach((o=>{const i=r("li"),s=n("task-div"),d=a.tasks.indexOf(o);s.setAttribute("t-index",d);const c=e("p",o.title),l=r("button","task-del");l.innerHTML="Delete Task",t(s,[c,l]),i.appendChild(s),g.appendChild(i)}))},c=()=>{document.querySelector(".project-list").innerHTML="",i.forEach(d)},l=document.querySelector(".add-project"),u=document.querySelector(".new-project-form");l.addEventListener("click",(()=>{u.classList.toggle("hide")})),document.querySelector(".create-project-btn").addEventListener("click",(t=>{const e=document.querySelector(".new-project-name").value;if(e.length>0){let t=o(e);i.push(t),c()}})),document.querySelector("main").addEventListener("click",(function(t){if(t.target&&t.target.matches("button.del-project")){const e=t.target.parentNode.getAttribute("p-index");i.splice(e,1),document.querySelector(".project-list").innerHTML="",i.forEach(d)}if(t.target&&t.target.matches("button.edit-project")){const e=t.target.parentNode.querySelector(".edit-input"),n=t.target.parentNode.getAttribute("p-index");e.classList.toggle("hide"),e.classList.contains("hide")||document.querySelector(".project-list").addEventListener("keyup",(function(t){t.preventDefault(),13===t.keyCode&&e.value.length>0&&(i[n].title=e.value,c())}))}if(t.target&&t.target.matches("input.task-submit")){t.preventDefault(),t.target.parentNode.parentNode.firstChild;const e=t.target.parentNode.firstChild.value,n=(t.target.parentNode.parentNode.firstChild,t.target.parentNode.parentNode.parentNode.getAttribute("p-index")),r=i[n];if(""!=e.length){const t=a(e);r.tasks.push(t),c()}}if(t.target&&t.target.matches("button.task-del")){const e=t.target.parentNode.getAttribute("t-index"),n=(t.target.parentNode.parentNode.firstChild,t.target.parentNode.parentNode),r=t.target.parentNode.parentNode.parentNode.parentNode.parentNode.getAttribute("p-index");i[r].tasks.splice(e,1),n.remove()}const e=document.querySelector(".edit-task");if(t.target&&t.target.matches(".task-div p")){const n=t.target.parentNode.getAttribute("t-index"),r=t.target.parentNode.parentNode.parentNode.parentNode.parentNode.getAttribute("p-index");i[r].tasks[n],e.classList.toggle("hide"),e.setAttribute("pt-indices",`${r}, ${n}`),e.classList.contains("hide")&&e.removeAttribute("pt-indices")}let n=document.querySelector(".task-title input");if(t.target&&t.target.matches(".task-title .title")){n.classList.toggle("hide"),newTaskTitle=n.value;const e=t.target.parentNode.getAttribute("t-index");t.target.parentNode.parentNode.parentNode.parentNode.parentNode.getAttribute("p-index"),console.log(e)}n.classList.contains("hide")||document.querySelector("main").addEventListener("keyup",(function(t){t.preventDefault(),13===t.keyCode&&n.value.length>0&&(task.title=n.value,console.log("Hellooo"))}))}));const p=o("Project 1");i.push(p);const g=a("task 1");p.tasks.push(g),c()})();
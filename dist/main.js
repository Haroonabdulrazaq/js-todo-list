(()=>{const t=(t,e)=>{e.forEach((e=>{t.appendChild(e)}))},e=(t,e)=>{const r=document.createElement(t);return r.innerHTML=e,r},r=t=>{const e=document.createElement("div");return e.setAttribute("class",t),e},n=(t,e="")=>{const r=document.createElement(t);return""!=e&&r.setAttribute("class",e),r},a=(t,e="",r="",n="",a=!1,i="default")=>({title:t,description:e,dueDate:r,priority:n,completed:a,project:"default"}),i=t=>({title:t,tasks:[]}),s=[],o=document.querySelector(".project-list"),c=a=>{const i=r("project"),c=s.indexOf(a);i.setAttribute("p-index",c);const d=e("h3",a.title),l=n("button","del-project");l.innerHTML="Delete Project";const u=n("button","edit-project");u.innerHTML="Edit";const p=n("input","edit-input");p.classList.add("hide");const g=n("ul","task-list"),m=document.createElement("div"),k=document.createElement("form");let h=document.createElement("input");h.setAttribute("type","text");let b=n("input","task-submit");b.setAttribute("type","submit"),b.setAttribute("value","Add Task"),t(k,[h,b]),t(m,[g,k]),t(i,[d,p,l,u,m]),o.appendChild(i),a.tasks.forEach((i=>{const s=n("li","task-item"),o=r("task-div"),c=n("input","task-checkbox");c.setAttribute("type","checkbox");const d=a.tasks.indexOf(i);o.setAttribute("t-index",d);const l=e("p",i.title),u=n("button","task-del");u.innerHTML="Delete Task",t(o,[c,l,u]),s.appendChild(o),g.appendChild(s)}))},d=()=>{document.querySelector(".project-list").innerHTML="",s.forEach(c)},l=document.querySelector(".add-project"),u=document.querySelector(".new-project-form");l.addEventListener("click",(()=>{u.classList.toggle("hide")})),document.querySelector(".create-project-btn").addEventListener("click",(t=>{const e=document.querySelector(".new-project-name").value;if(e.length>0){let t=i(e);s.push(t),d()}})),document.querySelector("main").addEventListener("click",(function(t){if(t.target&&t.target.matches(".task-checkbox")){const e=t.target.parentNode.getAttribute("t-index"),r=t.target.parentNode.parentNode.parentNode.parentNode.parentNode.getAttribute("p-index");s[r].tasks[e].completed=t.target.checked}if(t.target&&t.target.matches("button.del-project")){const e=t.target.parentNode.getAttribute("p-index");s.splice(e,1),d()}if(t.target&&t.target.matches("button.edit-project")){const e=t.target.parentNode.querySelector(".edit-input"),r=t.target.parentNode.getAttribute("p-index");e.classList.toggle("hide"),e.classList.contains("hide")||document.querySelector(".project-list").addEventListener("keyup",(function(t){t.preventDefault(),"Enter"===t.key&&e.value.length>0&&(s[r].title=e.value,d())}))}if(t.target&&t.target.matches("input.task-submit")){t.preventDefault(),t.target.parentNode.parentNode.firstChild;const e=t.target.parentNode.firstChild.value,r=(t.target.parentNode.parentNode.firstChild,t.target.parentNode.parentNode.parentNode.getAttribute("p-index")),n=s[r];if(""!=e.length){const t=a(e);n.tasks.push(t),d()}}if(t.target&&t.target.matches("button.task-del")){const e=t.target.parentNode.getAttribute("t-index"),r=(t.target.parentNode.parentNode.firstChild,t.target.parentNode.parentNode),n=t.target.parentNode.parentNode.parentNode.parentNode.parentNode.getAttribute("p-index");s[n].tasks.splice(e,1),r.remove()}const e=document.querySelector(".edit-task");if(t.target&&t.target.matches(".task-div p")){const r=t.target.parentNode.getAttribute("t-index"),n=t.target.parentNode.parentNode.parentNode.parentNode.parentNode.getAttribute("p-index"),a=s[n].tasks[r],i=document.querySelector(".task-title h3");e.classList.toggle("hide"),e.setAttribute("pt-indices",`${n}, ${r}`),i.innerHTML="Task: "+a.title,e.classList.contains("hide")&&e.removeAttribute("pt-indices")}const r=(t,r)=>{const n=e.getAttribute("pt-indices").split(",").map(Number);let[a,i]=[...n];s[a].tasks[i][t]=r};let n=document.querySelector(".task-title input");t.target&&t.target.matches(".task-title .title")&&n.classList.remove("hide"),n.classList.contains("hide")||document.querySelector("main").addEventListener("keyup",(function(t){t.preventDefault(),newTaskTitle=n.value,"Enter"===t.key&&n.value.length>0&&(r("title",newTaskTitle),n.classList.add("hide"),document.querySelector(".task-title .title").innerHTML="Task: "+newTaskTitle,d())}));const i=document.querySelector(".task-textarea");t.target&&t.target.matches(".task-textarea")&&document.querySelector("main").addEventListener("keyup",(function(t){t.preventDefault(),"Enter"===t.key&&i.value.length>0&&(r("description",i),document.querySelector(".task-description p").innerHTML=i.value,i.classList.add("hide"),d())})),t.target&&t.target.matches(".task-description p")&&i.classList.toggle("hide"),t.target&&t.target.matches('.task-priority input[name="taskPriority"]')&&r("priority",t.target.value),t.target&&t.target.matches(".close-edit i")&&e.classList.toggle("hide")}));const p=i("Project 1");s.push(p);const g=a("task 1");p.tasks.push(g),d()})();